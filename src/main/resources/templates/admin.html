<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Admin Dashboard</title>
</head>
<body>
<h1>Welcome, Admin!</h1>
<a th:href="@{/logout}">Logout</a>

<h2>Pending Trainer Requests</h2>
<table border="1">
    <thead>
    <tr>
        <th>Name</th>
        <th>Username</th>
        <th>Contact</th>
        <th>Action</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="trainer : ${pendingTrainers}">
        <td th:text="${trainer.name}"></td>
        <td th:text="${trainer.username}"></td>
        <td th:text="${trainer.contact}"></td>
        <td>
            <form th:action="@{/admin/approveTrainer}" method="post" style="display: inline;">
                <input type="hidden" name="username" th:value="${trainer.username}"/>
                <button type="submit">Approve</button>
            </form>
            <form th:action="@{/admin/rejectTrainer}" method="post" style="display: inline;">
                <input type="hidden" name="username" th:value="${trainer.username}"/>
                <button type="submit">Reject</button>
            </form>
        </td>
    </tr>
    </tbody>
</table>

<div th:if="${pendingPackages != null and !pendingPackages.isEmpty()}">
    <h2>Pending Package Proposals</h2>
    <table>
        <thead>
        <tr>
            <th>Name</th>
            <th>Duration</th>
            <th>Price</th>
            <th>Schedule</th>
            <th>Trainer</th>
            <th>Actions</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="pkg : ${pendingPackages}">
            <td th:text="${pkg.name}"></td>
            <td th:text="${pkg.durationWeeks + ' weeks'}"></td>
            <td th:text="'â‚¹' + ${pkg.price}"></td>

            <td>
                <ul>
                    <li th:each="entry : ${pkg.workoutSchedule.entrySet()}"
                        th:text="${entry.key} + ' (' + ${entry.value} + ')'">
                    </li>
                </ul>
            </td>

            <td th:text="${pkg.proposedBy.name}"></td>

            <td>
                <form th:action="@{/admin/approve-package}" method="post" style="display:inline;">
                    <input type="hidden" name="id" th:value="${pkg.id}">
                    <button type="submit">Approve</button>
                </form>
                <form th:action="@{/admin/reject-package}" method="post" style="display:inline;">
                    <input type="hidden" name="id" th:value="${pkg.id}">
                    <button type="submit">Reject</button>
                </form>
            </td>
        </tr>
        </tbody>
    </table>
</div>



</body>
</html>
